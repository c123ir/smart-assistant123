# راهنمای نصب و راه‌اندازی دستیار هوشمند توسعه

<div dir="rtl">

این راهنما مراحل نصب و راه‌اندازی برنامه دستیار هوشمند توسعه را به صورت گام به گام توضیح می‌دهد.

## پیش‌نیازها

قبل از نصب برنامه، اطمینان حاصل کنید که پیش‌نیازهای زیر را نصب کرده‌اید:

1. **Node.js**: نسخه 16.x یا بالاتر
   - دانلود: [nodejs.org](https://nodejs.org/)
   - برای تأیید نصب: `node --version`

2. **npm** یا **yarn**: نسخه 8.x (npm) یا 1.22.x (yarn) یا بالاتر
   - npm همراه با Node.js نصب می‌شود
   - برای تأیید نصب: `npm --version` یا `yarn --version`

3. **Git**: برای مدیریت کد منبع
   - دانلود: [git-scm.com](https://git-scm.com/)
   - برای تأیید نصب: `git --version`

4. **VSCode** (پیشنهادی): برای ویرایش کد
   - دانلود: [code.visualstudio.com](https://code.visualstudio.com/)

## مراحل نصب

### 1. دریافت کد منبع

```bash
# نسخه‌برداری از مخزن گیت
git clone https://github.com/your-organization/smart-assistant.git

# ورود به دایرکتوری پروژه
cd smart-assistant
```

### 2. نصب وابستگی‌ها

```bash
# با استفاده از npm
npm install

# یا با استفاده از yarn
yarn install
```

### 3. تنظیم فایل محیطی

یک فایل با نام `.env` در دایرکتوری اصلی پروژه ایجاد کنید و متغیرهای محیطی زیر را در آن قرار دهید:

```
# محیط اجرایی (development یا production)
NODE_ENV=development

# مسیر ذخیره‌سازی پایگاه داده (اختیاری - پیش‌فرض در مسیر اپلیکیشن دیتا قرار می‌گیرد)
DB_PATH=

# امکان دسترسی به دیباگر در محیط توسعه
ENABLE_DEVTOOLS=true
```

### 4. راه‌اندازی پایگاه داده

برای راه‌اندازی اولیه پایگاه داده، دستور زیر را اجرا کنید:

```bash
# اجرای اسکریپت راه‌اندازی پایگاه داده
npm run setup-db

# یا با استفاده از yarn
yarn setup-db
```

این اسکریپت، جداول مورد نیاز را در پایگاه داده SQLite ایجاد و داده‌های اولیه را وارد می‌کند.

## اجرای برنامه

### اجرا در محیط توسعه

```bash
# با استفاده از npm
npm run dev

# یا با استفاده از yarn
yarn dev
```

این دستور، برنامه را در حالت توسعه با قابلیت Hot-Reload اجرا می‌کند.

### ساخت نسخه نهایی

```bash
# با استفاده از npm
npm run build

# یا با استفاده از yarn
yarn build
```

خروجی ساخت در پوشه `dist` قرار می‌گیرد.

### اجرای نسخه نهایی

```bash
# با استفاده از npm
npm start

# یا با استفاده از yarn
yarn start
```

## بسته‌بندی برنامه

برای ساخت نسخه قابل نصب بر روی سیستم‌عامل‌های مختلف:

### Windows

```bash
# با استفاده از npm
npm run pack:win

# یا با استفاده از yarn
yarn pack:win
```

خروجی فایل `.exe` در پوشه `dist/win` قرار می‌گیرد.

### macOS

```bash
# با استفاده از npm
npm run pack:mac

# یا با استفاده از yarn
yarn pack:mac
```

خروجی فایل `.dmg` در پوشه `dist/mac` قرار می‌گیرد.

### Linux

```bash
# با استفاده از npm
npm run pack:linux

# یا با استفاده از yarn
yarn pack:linux
```

خروجی فایل‌های `.deb` و `.AppImage` در پوشه `dist/linux` قرار می‌گیرد.

## عیب‌یابی

### مشکلات رایج

1. **خطای نصب وابستگی‌ها**
   
   اگر در هنگام نصب وابستگی‌ها با خطا مواجه شدید، دستورات زیر را امتحان کنید:
   
   ```bash
   # پاک کردن کش npm
   npm cache clean --force
   
   # نصب مجدد
   npm install
   ```

2. **خطای پایگاه داده**
   
   اگر با خطای دسترسی به پایگاه داده مواجه شدید:
   
   - مطمئن شوید که اسکریپت `setup-db` را اجرا کرده‌اید
   - دسترسی‌های لازم برای نوشتن در مسیر پایگاه داده را بررسی کنید
   - می‌توانید پایگاه داده را به صورت دستی با اجرای دستور زیر بازسازی کنید:
   
   ```bash
   node scripts/setup-db.js --force
   ```

3. **خطای ساخت برنامه**
   
   اگر در هنگام ساخت برنامه با خطا مواجه شدید:
   
   - مطمئن شوید که همه وابستگی‌های توسعه نصب شده‌اند
   - فایل `tsconfig.json` را برای خطاهای احتمالی بررسی کنید
   - در صورت مواجهه با خطاهای تایپ‌اسکریپت، با دستور زیر خطاها را بررسی کنید:
   
   ```bash
   npm run check
   ```

4. **خطای اجرای برنامه**
   
   اگر برنامه اجرا نمی‌شود:
   
   - لاگ‌های برنامه را در مسیر زیر بررسی کنید:
     - Windows: `%APPDATA%\smart-assistant\logs`
     - macOS: `~/Library/Logs/smart-assistant`
     - Linux: `~/.config/smart-assistant/logs`
   
   - با فعال کردن DevTools در حالت توسعه، خطاها را در کنسول مرورگر بررسی کنید

## ساختار دایرکتوری

```
smart-assistant/
├── dist/                  # خروجی ساخت
├── node_modules/          # وابستگی‌های نصب شده
├── scripts/               # اسکریپت‌های کمکی
│   ├── setup-db.js        # اسکریپت راه‌اندازی پایگاه داده
│   └── ...
├── src/                   # کد منبع
│   ├── main.ts            # کد اصلی الکترون
│   ├── preload.js         # اسکریپت پیش‌بارگذاری
│   ├── services/          # سرویس‌های برنامه
│   ├── types/             # تعاریف تایپ‌اسکریپت
│   └── ui/                # کامپوننت‌های رابط کاربری
│       ├── components/    # کامپوننت‌های قابل استفاده مجدد
│       ├── screens/       # صفحات اصلی برنامه
│       ├── styles/        # استایل‌های SCSS
│       └── ...
├── .env                   # فایل متغیرهای محیطی
├── .gitignore             # فایل‌های نادیده گرفته شده توسط گیت
├── package.json           # مدیریت وابستگی‌ها و اسکریپت‌ها
├── tsconfig.json          # تنظیمات تایپ‌اسکریپت
└── webpack.config.js      # تنظیمات وب‌پک
```

## به‌روزرسانی برنامه

برای به‌روزرسانی برنامه به آخرین نسخه:

```bash
# دریافت آخرین تغییرات از مخزن گیت
git pull

# نصب وابستگی‌های جدید
npm install

# بازسازی برنامه
npm run build
```

## منابع بیشتر

- [مستندات API داخلی](./dev/INTERNAL_API.md)
- [مدل‌های داده](./DATA_MODELS.md)
- [راهنمای مشارکت](./CONTRIBUTING.md)
- [سوالات متداول](./FAQ.md)

</div> 